<!-- Additional HEAD content -->
{% block head %}
<link rel="stylesheet" href="/assets/css/location.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
{% endblock %}

<!-- Main -->
<main class="home">
  <section class="location">
    <div class="container-main">
    {% include 'sections/location/first.html.njk' %}
    {% include 'sections/location/flat.html.njk' %}
    </div> 
  </section>
  <section class="map"><div class="map" id="map"></div></section>
  {% include 'sections/location/services.html.njk' %}
</main>

<!-- Scripts -->
{% set script %}
{% include "js/map.js" %}
var map = createMap("map", 41.3933, 2.1377, 16);
var markerArray = [];
{%-for l in buildings-%}
{%-if l.Name == location.Name-%}
{%-for d in l.districts-%}
{% for b in d.buildings-%}
{{map}}
markerArray.push(putMarker(map, {{b.Lat_lon.slice(1,-1).split(',')[0]}}, {{b.Lat_lon.slice(1,-1).split(',')[1]}}));
{%-endfor-%}
{%-endfor-%}
{%-endif-%}
{%-endfor-%}
if (markerArray.length > 0) {
  var group = L.featureGroup(markerArray).addTo(map);
  map.fitBounds(group.getBounds());
}
{% endset %}<script>{{ script | jsmin | safe }}</script>

<script>
// new Splide('#splide', { type: 'loop', perPage: 3 }).mount();
new Splide('#sliderMini', { type: 'loop', perPage: 3 }).mount();
</script>